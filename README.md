# chatsystem
This Advanced Secure Programming assignment is designed to help students apply the theoretical concepts covered in the lectures/RangeForce and learn about practice secure programming. This assignment is a group work assignment.  In groups of 2-4 students, you will engage in a hands-on assignment that requires the design, development, and evaluation of a secure overlay chat system utilising a standardised protocol created by all the students in this class. This system must adhere to class-specified protocol, have a secure implementation, have the secured implementation intentionally and ethically "backdoored", and then be tested in a controlled code review process. The course concludes with a friendly hackathon exercise.

Currently the code is only tested with python 3.12.

## Execution

Installation
```
pip install -r requirements.txt

pip install websockets
``````

Open your terminal, navigate to the folder containing your main.html, and run:

```
python3 -m http.server 8000
```

Then open browser then go to:
```
http://localhost:8000/main.html
```

Open your terminal, navigate to the `src` and run:
```
python3 server.py
```
Then open another terminal to run:
```
python3 client.py
```

## Todo
- Counter and signature in the message [x]
- Multiple servers [x]
- File transfer
- Security backdoor
- Testing
- Error handeling
- Serverside message verification
- Fix up terminal output

## Some Notes
- Reading user input should be an asychronous operation to avoid blocking the whole process
- The tests are not working right now
- You need to request client list on client side when everyone joins before you can begin sending messages.

## Running
Once the server are running, they need to be given an address and a port, this is defaulted to `127.0.0.1` and port `8000`. It is reccomended to stay on `127.0.0.1` for the purposes of testing. by hitting enter for both options you will be presented with the base64 encoding of the server's public key and wil be asked if you would like to add any of the other servers to the neighbourhood. If you hit "y" you will then be asked to provide the address of a server in the neighbourhood which should be in the form `{address}:{port}`. Once enter you will then be asked to enter that server's base64 public key, this needs to be copy and pasted from the cli of the neighbouring server. 

### Example workflow for making a neighbourhood of 2 servers 
- Open up 2 terminals
- in terminal 1 run `server.py`
- in terminal 1 leave address on `127.0.0.1` and hit enter
- in terminal 1 leave port on `8000` and hit enter
- in terminal 2 run `server.py`
- in terminal 2 leave address on `127.0.0.1` and hit enter
- in terminal 2 change port to `8001` and hit enter
- in terminal 2 input the neighbouting addres as `127.0.0.1:8000` and hit enter
- copy the public key initally generated by terminal 1 into the input of terminal 2 and click enter.
- in terminal 2 hit enter until the websocket begins running
- in terminal 1 input the neighbouting addres as `127.0.0.1:8001` and hit enter
- copy the public key initally generated by terminal 2 into the input of terminal 1 and click enter.
- in terminal 2 hit enter until the websocket begins running

- Given you did all those steps properly, the servers are now connected.

- You can now add clients to terminals 1 and 2 seperately and talk to each other.